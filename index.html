<style>
  body {
    margin: 0;
    background: black;
    overflow: hidden;
  }

  video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    object-fit: contain;
    pointer-events: none;
    transition: opacity 0.5s;
    opacity: 0; /* hidden by default */
  }

  video.active {
    opacity: 1; /* fade in when active */
  }
</style>

<body>
  <video id="video1" muted></video>
  <video id="video2" muted></video>

  <script>
    const segments = [
      "slide1.mp4",
      "slide2.mp4",
      "slide3.mp4",
      "slide4.mp4",
      "slide5.mp4",
      "slide6.mp4",
      "slide7.mp4",
      "slide8.mp4",
      "slide9.mp4",
      "slide10.mp4"
    ];

    let index = 0;
    let waitingForClick = false;
    let currentVideo = 0;

    const videos = [
      document.getElementById("video1"),
      document.getElementById("video2")
    ];

    // Attach ended handlers once
    videos.forEach((vid) => {
      vid.onended = () => {
        waitingForClick = true;
      };
    });

    // Function to play a segment
    function playSegment(i, vidIndex) {
      const vid = videos[vidIndex];
      const otherVid = videos[1 - vidIndex];

      vid.src = segments[i];
      vid.load();
      vid.play(); // play immediately

      vid.classList.add("active");
      otherVid.classList.remove("active");
    }

    // Autoplay first segment
    playSegment(index, currentVideo);

    // Handle clicks
    document.addEventListener("click", () => {
      if (!waitingForClick) return;

      index++;
      if (index >= segments.length) return;

      waitingForClick = false;
      currentVideo = 1 - currentVideo; // switch video element
      playSegment(index, currentVideo);
    });
  </script>
</body>